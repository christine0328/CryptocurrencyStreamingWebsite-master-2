// quietflow.min.js
// Â© 2015 Paul Krishnamurthy

$.fn.quietflow=function(o){function a(o,a,t){console.log("%c "+o,"background: "+a+"; color: "+t)}function t(o,a,t,e){var r;return r=void 0!=e?"rgba("+Math.floor(Math.random()*o).toString()+","+Math.floor(Math.random()*a).toString()+","+Math.floor(Math.random()*t).toString()+", .5)":"rgb("+Math.floor(Math.random()*o).toString()+","+Math.floor(Math.random()*a).toString()+","+Math.floor(Math.random()*t).toString()+")"}function e(){function o(){for(var a=0;l>a;a+=c+1)for(var e=0;i>e;e+=c+1)z.fillStyle=t(v,u,g),z.fillRect(a,e,c,c);setTimeout(o,s)}function a(){(E+$>l||0>E+$)&&($=-$),(_+A>i||0>_+A)&&(A=-A),E+=$,_+=A,z.fillStyle=h,z.fillRect(0,0,l,i);for(var o=0;C>o;o++)for(var t=0;C>t;t++){var e=o/C*l,r=t/C*i,n=Math.sqrt(Math.pow(E-e,2)+Math.pow(_-r,2))/p;z.beginPath(),z.fillStyle=S,z.arc(e,r,n,0,2*Math.PI,!0),z.closePath(),z.fill()}setTimeout(a,s)}function e(){z.fillStyle=h,z.fillRect(0,0,l,i);for(var o=0;T>o;o++){var a=circleData[o],t=0,r=1,n=2,d=3,s=4,m=5;(a[t]+a[d]>l||a[t]+a[d]<0)&&(a[3]=-a[3]),(a[r]+a[s]>i||a[r]+a[s]<0)&&(a[s]=-a[s]),a[t]+=a[d],a[r]+=a[s],z.beginPath(),z.fillStyle=a[m],z.arc(a[t],a[r],a[n],0,2*Math.PI,!0),z.closePath(),z.fill()}setTimeout(e,y)}function r(){z.fillStyle=h,z.fillRect(0,0,l,i),z.beginPath(),z.fillStyle=lineColor,z.arc(k,x,2,0,2*Math.PI,!0),z.closePath(),z.fill();for(var o=0;R>o;o++)z.beginPath(),z.moveTo(k,x),z.lineTo(Math.random()*l,Math.random()*i),z.strokeStyle=lineColor,z.shadowColor=m,z.shadowBlur=20,z.stroke();setTimeout(r,s)}function n(){var o=z.createLinearGradient(0,0,l/2,i);o.addColorStop(0,"#333333"),o.addColorStop(1,"#000"),z.fillStyle=o,z.fillRect(0,0,l,i);for(var a=0;a<H.length;a++){var t=H[a],e=0,r=1,d=2,h=3;t[e]+=t[h],z.beginPath(),z.fillStyle=P,z.arc(t[e],t[r],t[d],0,2*Math.PI,!0),z.shadowColor="#fff",z.shadowBlur=20,z.closePath(),z.fill(),t[e]>l&&(H.splice(a,1),H.unshift([Math.random()*l/4-l/4,Math.random()*i,Math.random()*D,Math.ceil(5*Math.random())]))}setTimeout(n,s)}function I(){z.beginPath(),z.strokeStyle=f.length>0?f[Math.floor(Math.random()*f.length)]:t(255,255,255),z.moveTo(0,0),z.lineTo(Math.random()*l,Math.random()*i),z.strokeStyle=f.length>0?f[Math.floor(Math.random()*f.length)]:t(255,255,255),z.moveTo(l,0),z.lineTo(Math.random()*l,Math.random()*i),z.strokeStyle=f.length>0?f[Math.floor(Math.random()*f.length)]:t(255,255,255),z.moveTo(0,i),z.lineTo(Math.random()*l,Math.random()*i),z.strokeStyle=f.length>0?f[Math.floor(Math.random()*f.length)]:t(255,255,255),z.moveTo(l,i),z.lineTo(Math.random()*l,Math.random()*i),z.shadowColor=m,z.shadowBlur=20,z.stroke(),setTimeout(I,s)}function L(){z.fillStyle=h,z.fillRect(0,0,l,i);for(var o=0;o<J.length;o++){var a=J[o],e=0,r=1,n=2,d=3,s=4;z.fillStyle=a[d],z.fillRect(a[e],a[r],a[n],a[n]),a[e]+=a[s],a[r]-=a[s],(a[e]>l+q||a[r]<-q)&&(J.splice(o,1),J.push(0==f.length?M?[Math.random()*l*2-l,Math.random()*i*2+i,Math.random()*q+1,t(255,255,255,.5),5*Math.random()]:[Math.random()*l*2-l,Math.random()*i*2+i,Math.random()*q+1,t(255,255,255),5*Math.random()]:[Math.random()*l*2-l,Math.random()*i*2+i,Math.random()*q+1,f[Math.floor(Math.random()*f.length)],5*Math.random()]))}setTimeout(L,100)}if("squareFlash"==d)setTimeout(o,s);else if("vortex"==d){var $=2,A=4,E=l/2,_=i/2;setTimeout(a,s)}else if("bouncingBalls"==d){circleData=[];for(var Y=0;T>Y;Y++)circleData.push(0==f.length?M?[Math.random()*l,Math.random()*i,Math.random()*b,2*Math.random(),4*Math.random(),t(255,255,255,.5)]:[Math.random()*l,Math.random()*i,Math.random()*b,2*Math.random(),4*Math.random(),t(255,255,255)]:[Math.random()*l,Math.random()*i,Math.random()*b,2*Math.random(),4*Math.random(),f[Math.floor(Math.random()*f.length)]]);setTimeout(e,y)}else if("shootingLines"==d)setTimeout(r,s);else if("simpleGradient"==d){var j=z.createLinearGradient(0,0,l/2,i);j.addColorStop(0,w),j.addColorStop(1,B),z.fillStyle=j,z.fillRect(0,0,l,i)}else if("starfield"==d){for(var H=[],Y=0;700>Y;Y++)H.push([Math.random()*l*2-l,Math.random()*i,Math.random()*D,Math.ceil(5*Math.random())]);setTimeout(n,s)}else if("layeredTriangles"==d){z.fillStyle=h,z.fillRect(0,0,l,i);for(var Y=0;G>Y;Y++)z.beginPath(),z.moveTo(Math.random()*l,Math.random()*i),z.lineTo(Math.random()*l,Math.random()*i),z.lineTo(Math.random()*l,Math.random()*i),z.fillStyle=f.length>0?f[Math.floor(Math.random()*f.length)]:t(255,255,255,.5),z.closePath(),z.fill()}else if("cornerSpikes"==d)z.fillStyle=h,z.fillRect(0,0,l,i),setTimeout(I,s);else if("floatingBoxes"==d){for(var J=[],Y=0;F>Y;Y++)J.push(0==f.length?M?[Math.random()*l*2-l,Math.random()*i,Math.random()*q+1,t(255,255,255,.5),5*Math.random()]:[Math.random()*l*2-l,Math.random()*i,Math.random()*q+1,t(255,255,255),5*Math.random()]:[Math.random()*l*2-l,Math.random()*i,Math.random()*q+1,f[Math.floor(Math.random()*f.length)],5*Math.random()]);setTimeout(L,100)}}var r=this,l=r.width(),i=r.height();$("#quietflow").remove();var n,d="starfield";n=void 0!=o.z_Index?o.z_Index:-1e3;var h,s,m,f=[],M=!0,c=10,v=255,u=255,g=255,p=20,C=30,S="#6F6F6F",b=40,y=50,T=50,k=l/2,x=i/2,R=50,w="#D4145A",B="#FBB03B",D=3,P="#fff",G=50,F=400,q=80,I=document.createElement("canvas"),z=I.getContext("2d");I.id="quietflow",I.width=l,I.height=i,I.style.zIndex=n,I.style.position="absolute",I.style.top=0;var L=$(this).attr("id");if(void 0!=L){var A=document.getElementById(L);A.appendChild(I)}else document.body.appendChild(I);void 0!=o?"squareFlash"==o.theme?(d="squareFlash",void 0!=o.squareSize&&(c=o.squareSize),void 0!=o.maxRed&&(v=o.maxRed),void 0!=o.maxGreen&&(u=o.maxGreen),void 0!=o.maxBlue&&(g=o.maxBlue),s=void 0!=o.speed?o.speed:100):"vortex"==o.theme?(d="vortex",void 0!=o.mainRadius&&(p=o.mainRadius),void 0!=o.miniRadii&&(C=o.miniRadii),h=void 0!=o.backgroundCol?o.backgroundCol:"#01FAFC",void 0!=o.circleCol&&(S=o.circleCol),s=void 0!=o.speed?o.speed:10):"bouncingBalls"==o.theme?(d="bouncingBalls",void 0!=o.specificColors&&(f=o.specificColors),h=void 0!=o.backgroundCol?o.backgroundCol:"#D6D6D6",void 0!=o.maxRadius&&(b=o.maxRadius),void 0!=o.bounceSpeed&&(y=o.bounceSpeed),void 0!=o.bounceBallCount&&(T=o.bounceBallCount),M=void 0!=o.transparent?o.transparent:!0):"shootingLines"==o.theme?(d="shootingLines",h=void 0!=o.backgroundCol?o.backgroundCol:"#000",lineColor=void 0!=o.lineColor?o.lineColor:"#fff",s=void 0!=o.speed?o.speed:150,m=void 0!=o.lineGlow?o.lineGlow:"#fff",void 0!=o.lineColor&&(lineColor=o.lineColor),void 0!=o.lines&&(R=o.lines)):"simpleGradient"==o.theme?(d="simpleGradient",void 0!=o.primary&&(w=o.primary),void 0!=o.accent&&(B=o.accent)):"starfield"==o.theme?(d="starfield",void 0!=o.starColor&&(P=o.starColor),void 0!=o.starSize&&(D=o.starSize),s=void 0!=o.speed?o.speed:100):"layeredTriangles"==o.theme?(d="layeredTriangles",h=void 0!=o.backgroundCol?o.backgroundCol:"#D6D6D6",M=void 0!=o.transparent?o.transparent:!0,void 0!=o.specificColors&&(f=o.specificColors),void 0!=o.triangles&&(G=o.triangles)):"cornerSpikes"==o.theme?(d="cornerSpikes",void 0!=o.specificColors&&(f=o.specificColors),h=void 0!=o.backgroundCol?o.backgroundCol:"#000",lineColor=void 0!=o.lineColor?o.lineColor:"#fff",s=void 0!=o.speed?o.speed:100,m=void 0!=o.lineGlow?o.lineGlow:"#fff"):"floatingBoxes"==o.theme&&(d="floatingBoxes",void 0!=o.specificColors&&(f=o.specificColors),void 0!=o.boxCount&&(F=o.boxCount),h=void 0!=o.backgroundCol?o.backgroundCol:"#D6D6D6",M=void 0!=o.transparent?o.transparent:!0):a("You need to specify some attributes!","#D6D6D6","#DF0000"),e()};